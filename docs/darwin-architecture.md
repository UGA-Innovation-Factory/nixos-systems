# Darwin Support Architecture Diagram

## Current Architecture (NixOS Only)

```
flake.nix
├── inputs (nixpkgs, home-manager, disko, etc.)
└── outputs
    ├── nixosConfigurations = hosts.nixosConfigurations
    │   └── Generated by hosts/default.nix
    └── packages = artifacts (ISOs, LXC, etc.)

hosts/default.nix (Host Generator)
├── mkHost() → lib.nixosSystem
│   ├── Loads host type from hosts/types/
│   ├── Imports common.nix
│   │   ├── boot.nix (bootloader, disko)
│   │   ├── user-config.nix
│   │   └── sw/ (software profiles)
│   └── Applies config overrides
└── Processes inventory.nix → generates all hosts
```

For the full architecture diagram, see DARWIN_SUPPORT_ASSESSMENT.md
